YUI.add("lw_base64",function(b){var a={keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var c="",d=0,m,k,h,l,j,g,f;e=a.utf8_encode(e);while(d<e.length){m=e.charCodeAt(d);d=d+1;k=e.charCodeAt(d);d=d+1;h=e.charCodeAt(d);d=d+1;l=m>>2;j=((m&3)<<4)|(k>>4);g=((k&15)<<2)|(h>>6);f=h&63;if(isNaN(k)){g=64;f=64;}else{if(isNaN(h)){f=64;}}c=c+this.keyStr.charAt(l)+this.keyStr.charAt(j)+this.keyStr.charAt(g)+this.keyStr.charAt(f);}return c;},decode:function(e){var c="",m,k,h,l,j,g,f,d=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(d<e.length){l=this.keyStr.indexOf(e.charAt(d));d=d+1;j=this.keyStr.indexOf(e.charAt(d));d=d+1;g=this.keyStr.indexOf(e.charAt(d));d=d+1;f=this.keyStr.indexOf(e.charAt(d));d=d+1;m=(l<<2)|(j>>4);k=((j&15)<<4)|(g>>2);h=((g&3)<<6)|f;c=c+String.fromCharCode(m);if(g!==64){c=c+String.fromCharCode(k);}if(f!==64){c=c+String.fromCharCode(h);}}c=a.utf8_decode(c);return c;},utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");var d="",g=0,f;for(g;g<e.length;g=g+1){f=e.charCodeAt(g);if(f<128){d+=String.fromCharCode(f);}else{if((f>127)&&(f<2048)){d+=String.fromCharCode((f>>6)|192);d+=String.fromCharCode((f&63)|128);}else{d+=String.fromCharCode((f>>12)|224);d+=String.fromCharCode(((f>>6)&63)|128);d+=String.fromCharCode((f&63)|128);}}}return d;},utf8_decode:function(d){var f="",h=0,j=0,g=0,e=0;while(h<d.length){j=d.charCodeAt(h);if(j<128){f+=String.fromCharCode(j);h=h+1;}else{if((j>191)&&(j<224)){g=d.charCodeAt(h+1);f+=String.fromCharCode(((j&31)<<6)|(g&63));h=h+2;}else{g=d.charCodeAt(h+1);e=d.charCodeAt(h+2);f+=String.fromCharCode(((j&15)<<12)|((g&63)<<6)|(e&63));h=h+3;}}}return f;}};b.namespace("LW");b.LW.Base64=a;},"@VERSION@",{});/* Copyright (c) 2014, Yahoo! Inc.  All rights reserved. */
YUI.add("lw_geo",function(b){var a={running:false,timeout:15000,geoDetectSupport:function(){if(!navigator.geolocation){return false;}return true;},getCurrentLocation:function(d,c,e){if(!this.running){e=e||this.timeout;navigator.geolocation.getCurrentPosition(d,c,{timeout:e});this.running=true;}else{c(null);}}};b.namespace("LW");b.LW.GeoLocation=a;},"@VERSION@",{});/* Copyright (c) 2014, Yahoo! Inc.  All rights reserved. */
YUI.add("jsonp-url",function(e,d){var a=e.JSONPRequest,c=e.Object.getValue,b=function(){};e.mix(a.prototype,{_pattern:/\bcallback=(.*?)(?=&|$)/i,_template:"callback={callback}",_defaultCallback:function(h){var g=h.match(this._pattern),k=[],j=0,f,l,m;if(g){f=g[1].replace(/\[(['"])(.*?)\1\]/g,function(n,i,o){k[j]=o;return".@"+(j++);}).replace(/\[(\d+)\]/g,function(n,i){k[j]=parseInt(i,10)|0;return".@"+(j++);}).replace(/^\./,"");if(!/[^\w\.\$@]/.test(f)){l=f.split(".");for(j=l.length-1;j>=0;--j){if(l[j].charAt(0)==="@"){l[j]=k[parseInt(l[j].substr(1),10)];}}m=c(e.config.win,l)||c(e,l)||c(e,l.slice(1));}}return m||b;},_format:function(f,h){var i=this._template.replace(/\{callback\}/,h),g;if(this._pattern.test(f)){return f.replace(this._pattern,i);}else{g=f.slice(-1);if(g!=="&"&&g!=="?"){f+=(f.indexOf("?")>-1)?"&":"?";}return f+i;}}},true);},"3.8.1",{requires:["jsonp"]});/* Copyright (c) 2014, Yahoo! Inc.  All rights reserved. */
YUI.add("lw_geocoder",function(b){var a={proto:null,host:"locdrop.query.yahoo.com",table:"locdrop.placefinder",urlPath:"/v1/public/yql?",gflags:"f",flags:"T",locale:"en-US",timeout:5000,geocodeAddress:function(c,j,f,g,i){if(c===null){return;}if(!this.proto){this.proto=i.instance.proto;this.locale=i.instance.locale;}var e,d="",h=c+d;h=h.replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0");e="select * from "+this.table+' where text="'+encodeURIComponent(h)+'" and locale="'+this.locale+'" and gflags="'+this.gflags+'" and flags="'+this.flags+'"';this.geocode(e,j,f,g,i);},geocode:function(f,j,g,h,i){var d,c,e;e=this.proto+this.host+this.urlPath+"q="+f+"&format=json&callback={callback}";d={instance:this,tcb:h,fcb:g,scb:j,cb:i,requestURL:e};c=new b.JSONPRequest(e,{on:{success:this.geocodeDone,timeout:this.geocodeTimedout,failure:this.geocodeFailure},timeout:this.timeout,args:[d]});c.send();},geocodeDone:function(c,d){if(typeof c==="undefined"||typeof(c.error)!=="undefined"||typeof(c.query.results)==="undefined"){d.instance.geocodeFailure(c,d);}else{d.scb(c,d.cb);}},geocodeTimedout:function(c,d){var e={errCode:"LW_GEOCODER_TIMEOUT",requestURL:d.requestURL,yqlResponse:c};d.tcb(e,d.cb);},geocodeFailure:function(c,d){var e={errCode:"LW_GEOCODER_FAILURE",requestURL:d.requestURL,yqlResponse:c};d.fcb(e,d.cb);},geocodeMakeLocArray:function(k,o,c){var f,e=0,g=[],m,h=[],l,n,d;if(k===1){g.push(o.query.results.Result);}else{g=o.query.results.Result;}m=g.length;for(f=0;f<m;f=f+1){l="";if(g[f].line1!==null){l=g[f].line1;}if(g[f].line2!==null){if(l.length>0){l+=", ";}l+=g[f].line2;}if(g[f].line3!==null){if(l.length>0){l+=", ";}l+=g[f].line3;}if(g[f].line4!==null){if(l.length>0){l+=", ";}l+=g[f].line4;}g[f].id="new-fl-"+b.LW.Base64.encode(l);g[f].addr=l;g[f].city=g[f].city||null;if(g[f].uzip!==null&&g[f].uzip!==""&&g[f].uzip!=="0"){g[f].zip=g[f].uzip;}if(g[f].statecode!==null){g[f].sc=g[f].statecode;}if(g[f].countrycode!==null){g[f].cc=g[f].countrycode;}if(g[f].country!==null){g[f].ctry=g[f].country;}if(g[f].latitude!==null){g[f].lat=g[f].latitude;}if(g[f].longitude!==null){g[f].lon=g[f].longitude;}if(g[f].woeid!==null){g[f].woe=g[f].woeid;}n=true;if(c){d=c(g[f]);if(d.hidden){n=false;}if(d.disabled){g[f].disabled=true;}}if(n){h[e]=g[f];e=e+1;}}return h;}};b.namespace("LW");b.LW.PlaceFinder=a;},"@VERSION@",{requires:["jsonp","jsonp-url","lw_base64"]});/* Copyright (c) 2014, Yahoo! Inc.  All rights reserved. */
YUI.add("lw_autosuggest",function(b){var a={proto:null,host:null,urlPath:null,locale:"en-US",timeout:5000,pending:false,suggestLocation:function(h,k,d,l,f,e,m){if(h===null){return;}if(this.pending){return;}if(!this.proto){this.proto=m.instance.proto;this.locale=m.instance.locale;if(this.proto==="https://"){this.host="search.yahoo.com";this.urlPath="/sugg/gossip/gossip-gl-location?output=sd1&p2=t,pt,z,a";}else{this.host="sugg.us.search.yahoo.net";this.urlPath="/gossip-gl-location?output=sd1&p2=t,pt,z,a";}}this.pending=true;var n,i,g="",j=h+g,c=this.proto+this.host+this.urlPath;j=j.replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0");if(k!==null&&d!==null){c+="&p1="+d+","+k;}c+="&command="+j+"&lc="+this.locale+"&callback={callback}";n={instance:this,tcb:e,fcb:f,scb:l,cb:m,requestURL:c,inputVal:h};i=new b.JSONPRequest(c,{on:{success:this.suggestDone,timeout:this.suggestTimedout,failure:this.suggestFailure},timeout:this.timeout,args:[n]});i.send();},suggestDone:function(c,d){if(typeof c==="undefined"||typeof c.r==="undefined"){d.instance.suggestFailure(c,d);}else{d.instance.pending=false;d.scb(c,d.inputVal,d.cb);}},suggestTimedout:function(c,d){d.instance.pending=false;var e={errCode:"LW_AUTOSUGGEST_TIMEOUT",requestURL:d.requestURL,yqlResponse:c};d.tcb(e,d.cb);},suggestFailure:function(c,d){d.instance.pending=false;var e={errCode:"LW_AUTOSUGGEST_FAILURE",requestURL:d.requestURL,yqlResponse:c};d.fcb(e,d.cb);},suggestMakeLocArray:function(q,u){var t=0,r=0,o=0,g,v,f=(q?q.length:0),c=[],p=this.locale.toLowerCase(),d,l="",w,n=null,s="",m="",h=u.toUpperCase(),e;for(t;t<f;t=t+1){e=false;w=[];n=null;l="";if(q[t].d!==null){g=q[t].d;if(g.indexOf(":")!==-1){g=g.split(":")[1];}if(g.indexOf("&")!==-1){v=g.split("&");o=0;d=v.length;for(o;o<d;o=o+1){if(v[o].indexOf("woeid")===0){q[t].woe=v[o].split("=")[1];}else{if(v[o].indexOf("lat")===0){q[t].lat=v[o].split("=")[1];}else{if(v[o].indexOf("lon")===0){q[t].lon=v[o].split("=")[1];}else{if(v[o].indexOf("sc")===0){q[t].sc=v[o].split("=")[1];}else{if(v[o].indexOf("s")===0){q[t].state=v[o].split("=")[1];}else{if(v[o].indexOf("c")===0){q[t].ctry=v[o].split("=")[1];}else{if(v[o].indexOf("iso")===0){q[t].cc=v[o].split("=")[1];}else{if(v[o].indexOf("pn")===0){q[t].pn_city=v[o].split("=")[1];}else{if(v[o].indexOf("z")===0){q[t].zipcode=v[o].split("=")[1];}else{if(v[o].indexOf("n")===0){n=v[o].split("=")[1];}}}}}}}}}}}}}s=q[t].k;m=q[t].pn_city;if(s&&(s.toUpperCase()).indexOf(h)===0){e=true;}else{if(m&&(m.toUpperCase()).indexOf(h)===0){e=true;s=m;}}if(q[t].zipcode&&q[t].zipcode.indexOf(h)===0){e=true;}if(e){q[t].city=s;if(p.indexOf("hk")!==-1||p.indexOf("tw")!==-1){if(typeof(q[t].ctry)!=="undefined"&&q[t].ctry){w.push(q[t].ctry);}if(typeof(q[t].state)!=="undefined"&&q[t].state&&s!==q[t].state){w.push(q[t].state);}w.push(s);}else{w.push(s);if(p.indexOf("it")!==-1||p.indexOf("au")!==-1||p.indexOf("br")!==-1||p.indexOf("mx")!==-1||p.indexOf("ca")!==-1||p.indexOf("us")!==-1){if(typeof(q[t].sc)!=="undefined"&&q[t].sc){w.push(q[t].sc);}else{if(typeof(q[t].state)!=="undefined"&&q[t].state&&s!==q[t].state){w.push(q[t].state);}}}else{if(typeof(q[t].state)!=="undefined"&&q[t].state&&s!==q[t].state){w.push(q[t].state);}else{if(typeof(q[t].sc)!=="undefined"&&q[t].sc){w.push(q[t].sc);}}}if(p.indexOf("us")!==-1&&typeof(q[t].cc)!=="undefined"&&q[t].cc){w.push(q[t].cc);}else{if(typeof(q[t].ctry)!=="undefined"&&q[t].ctry){w.push(q[t].ctry);}}}l=w.join(", ");q[t].addr=n||l;q[t].id="new-gsp-"+b.LW.Base64.encode(l);if(l){c[r]={};c[r].id=q[t].id;c[r].woe=q[t].woe;c[r].addr=q[t].addr;if(typeof(q[t].lat)!=="undefined"&&q[t].lat){c[r].lat=q[t].lat;}if(typeof(q[t].lon)!=="undefined"&&q[t].lon){c[r].lon=q[t].lon;}if(typeof(q[t].city)!=="undefined"&&q[t].city){c[r].city=q[t].city;}if(typeof(q[t].state)!=="undefined"&&q[t].state){c[r].state=q[t].state;}if(typeof(q[t].sc)!=="undefined"&&q[t].sc){c[r].sc=q[t].sc;}if(typeof(q[t].ctry)!=="undefined"&&q[t].ctry){c[r].ctry=q[t].ctry;}if(typeof(q[t].cc)!=="undefined"&&q[t].cc){c[r].cc=q[t].cc;}r=r+1;}}}return c;}};b.namespace("LW");b.LW.PlaceSuggest=a;},"@VERSION@",{requires:["jsonp","jsonp-url","lw_base64"]});/* Copyright (c) 2014, Yahoo! Inc.  All rights reserved. */
YUI.add("lw_yql",function(b){var a={crumb:null,app:"yahoo.locdrop.frontpage.desktop",locale:"en-US",version:"v4",proto:"http://",yqlHost:"us-locdrop.query.yahoo.com",yqlTable:"user.location.public",urlPath:"/v1/public/yql?",yqlTimeout:5000,pendingCallback:false,initConfig:function(c){if(c.crumb){this.crumb=c.crumb;}if(c.locale){this.locale=c.locale;}if(c.app){this.app=c.app;}if(c.version){this.version=c.version;}if(c.yqlHost){this.yqlHost=c.yqlHost;}if(window.location.protocol==="https:"||c.forceSSL){this.proto="https://";}},getHostUrl:function(){return this.proto+this.yqlHost+this.urlPath;},makeRequest:function(h,g,f){if(this.pendingCallback){return false;}this.pendingCallback=true;var c,d,e=this.getHostUrl()+"q="+h+"&format=json&callback={callback}";d={callbackStr:g,env:f,instance:this,requestURL:e};c=new b.JSONPRequest(e,{on:{success:this.requestDone,timeout:this.requestTimeout,failure:this.requestFailure},timeout:this.yqlTimeout,args:[d]});c.send();return true;},getCurrentLocation:function(i,d,f){var h,j,k,g,c,e;k=this.crumb;j=this.locale;g=this.version;c=this.app;e={success:i,error:d,timeout:f};h="SELECT * FROM "+this.yqlTable+' WHERE crumb="'+k+'" AND version="'+g+'" AND locale="'+j+'" AND app="'+c+'"';return this.makeRequest(encodeURIComponent(h),"getCurrentLocationCallback",e);},getAllLocations:function(j,d,f,g){var i,k,l,h,c,e;l=this.crumb;k=this.locale;h=this.version;c=this.app;e={success:j,error:d,timeout:f,callback:g};i="SELECT * FROM "+this.yqlTable+' WHERE crumb="'+l+'" AND version="'+h+'" AND locale="'+k+'" AND app="'+c+'"';return this.makeRequest(encodeURIComponent(i),"getAllLocationsCallback",e);},getCurrentLocationCallback:function(c,f){var g="current",d=[],h=[],e;if(typeof(c.query.results.locdrop[g]!=="undefined")&&c.query.results.locdrop[g]){d=(c.query.results.locdrop[g].length)?c.query.results.locdrop[g]:[c.query.results.locdrop[g]];}if(f.env.success){f.env.success(d);}},getAllLocationsCallback:function(c,e){var f="favorite",d=[];if(typeof(c.query.results.locdrop[f]!=="undefined")&&c.query.results.locdrop[f]){d=(c.query.results.locdrop[f].length)?c.query.results.locdrop[f]:[c.query.results.locdrop[f]];}if(e.env.success){e.env.success(d,e.env.callback);}},deleteLocation:function(k,j,d,e,f){var h,i={id:k,success:j,error:d,timeout:e,callback:f},c,l,g;l=this.crumb;g=this.version;c=this.app;h="DELETE FROM "+this.yqlTable+' WHERE id="'+k+'" AND app="'+c+'" AND crumb="'+l+'" AND version="'+g+'"';return this.makeRequest(encodeURIComponent(h),"deleteLocationCallback",i);},deleteLocationCallback:function(c,d){if(d.env.success){d.env.success(c,d.env.callback);}},setLocation:function(g,o,e,h,i){var l,q=[],j,m=[],f,d,k,p,n,c={success:o,error:e,timeout:h,callback:i};p=this.crumb;d=this.app;k=this.version;n=this.locale;if(p){q.push("crumb");m.push('"'+p+'"');}if(d){q.push("app");m.push('"'+d+'"');}if(k){q.push("version");m.push('"'+k+'"');}if(n){q.push("locale");m.push('"'+n+'"');}if(g.type){q.push("type");m.push('"'+g.type+'"');}if(g.lat){q.push("lat");m.push('"'+g.lat+'"');}if(g.lon){q.push("lon");m.push('"'+g.lon+'"');}if(g.radius){q.push("radius");m.push('"'+g.radius+'"');}if(g.woe){q.push("woe");m.push('"'+g.woe+'"');}if(g.addrstring){q.push("addrstring");m.push('"'+g.addrstring+'"');}if(g.ip){q.push("ip");m.push('"'+g.ip+'"');}if(g.wifi_id){q.push("wifi_id");m.push('"'+g.wifi_id+'"');}if(g.wifi_ssid){q.push("wifi_ssid");m.push('"'+g.wifi_ssid+'"');}if(g.cell_id){q.push("cell_id");m.push('"'+g.cell_id+'"');}if(g.src&&g.src==="declared"){q.push("src");m.push('"'+g.src+'"');}j=q.join(", ");f=m.join(", ");l="INSERT INTO "+this.yqlTable+"("+j+") VALUES ("+f+")";return this.makeRequest(encodeURIComponent(l),"setLocationCallback",c);},setLocationCallback:function(c,d){if(d.env.success){d.env.success(c,d.env.callback);}},queryTypeErroCode:function(d){var e,c="LYD_GET_API_ERR";e=new RegExp(d,"i");if(e.test("select")||e.test("update")){c="LYD_SET_API_ERR";}else{if(e.test("delete")){c="LYD_CLEAR_API_ERR";}}return c;},responseErrorCheck:function(c,e){var d={errCode:0,requestURL:e||"",yqlResponse:c||""};if((typeof c==="undefined"||typeof(c.error)!=="undefined")||(typeof(c.query)==="undefined"||typeof(c.query.results)==="undefined"||c.query.results===null)||(typeof(c.query.results.Error)!=="undefined")||(typeof(c.query.results.result)!=="undefined")){d.errCode=this.queryTypeErroCode(e);return d;}if(typeof(c.query.results.locdrop)!=="undefined"&&typeof(c.query.results.locdrop.status)!=="undefined"&&c.query.results.locdrop.status.code==="ERROR"){switch(c.query.results.locdrop.actionTaken){case"get":d.errCode="LYD_GET_API_ERR";break;case"set":d.errCode="LYD_SET_API_ERR";break;case"clear":d.errCode="LYD_CLEAR_API_ERR";break;default:return;}return d;}return d;},requestDone:function(d,c){c.instance.pendingCallback=false;var e=c.instance.responseErrorCheck(d,c.requestURL);if(e.errCode){c.env.error(e,c.env.callback);return;}c.instance[c.callbackStr](d,c);},requestTimeout:function(d,c){c.instance.pendingCallback=false;var e={errCode:"LYD_SAVED_LOC_FETCH_TIMEOUT",requestURL:c.requestURL,yqlResponse:d};if(c.env.timeout){c.env.timeout(e,c.env.callback);}},requestFailure:function(d,c){c.instance.pendingCallback=false;var e=c.instance.responseErrorCheck(d);if(c.env.error){c.env.error(e,c.env.callback);}}};b.namespace("LW");b.LW.YQL=a;},"@VERSION@",{requires:["jsonp","jsonp-url"]});/* Copyright (c) 2014, Yahoo! Inc.  All rights reserved. */
YUI.add("lw_core",function(b){function a(g){var f=this,e={status:"OK"},c={status:"ERROR"},d={status:"TIMEOUT"};this.filterCallback=g.filterCallback;this.geoTimeout=15000;this.app=g.app||"yahoo.locdrop.frontpage.desktop";this.holderSetTimeout=null;this.autoCompleteCount=2;this.addrStr=g.pageLoadLoc||null;this.lat=g.lat||null;this.lon=g.lon||null;this.gossipResults=[];this.cacheFavLoc=[];this.favSuggLoc=[];this.flLoc=[];this.detectCtx=null;this.yqladdFavLocCB=null;this.holderSetTimeout=null;this.locale=g.locale||"en-US";this.init=function(){b.LW.YQL.initConfig(g);};this.getFavoriteCache=function(){return f.cacheFavLoc;};this.invalidateCache=function(){f.cacheFavLoc=[];};this.selectedLoc=function(l){var k,h=0,j=[];if(l.indexOf("new-gsp")!==-1){j=this.favSuggLoc;k="gossip";}else{if(l.indexOf("new-fl")!==-1){j=this.flLoc;k="findlocation";}else{j=this.cacheFavLoc;k="locdrop";}}for(h;h<j.length;h=h+1){if(j[h].id===l){j[h].origin=k;return j[h];}}return null;};this.detect=function(h){this.detectCtx=h;if(typeof h.params!=="undefined"){b.LW.YQL.setLocation(h.params,f.yqldetectSuccess,f.detectFailed,f.detectTimeout);}else{if(b.LW.GeoLocation.geoDetectSupport()){if(b.LW.GeoLocation.running){return;}b.LW.GeoLocation.getCurrentLocation(f.detectLocationInsert,f.detectFailed,f.geoTimeout);this.holderSetTimeout=setTimeout(b.bind(function(i){this.detectTimeout();},this),this.geoTimeout);}else{c.code="LW_DETECT_BROWSER_SUPPORT";return h.callback.call(h.instance,{},c);}}};this.detectLocationInsert=function(h){b.LW.GeoLocation.running=false;var i={};i.lat=h.coords.latitude;i.lon=h.coords.longitude;i.radius=h.coords.accuracy;i.type="current";b.LW.YQL.setLocation(i,f.yqldetectSuccess,f.detectFailed,f.detectTimeout);};this.yqldetectSuccess=function(){f.invalidateCache();b.LW.YQL.getCurrentLocation(f.detectSuccess,f.detectFailed,f.detectTimeout);};this.detectSuccess=function(h){if(f.holderSetTimeout){clearTimeout(f.holderSetTimeout);}if(h.length){h[0]["orgin"]="locdrop";}return f.detectCtx.callback.call(f.detectCtx.instance,h,e);};this.detectFailed=function(h){if(f.holderSetTimeout){clearTimeout(f.holderSetTimeout);}b.LW.GeoLocation.running=false;c.code="LW_DETECT_FAILURE";return f.detectCtx.callback.call(f.detectCtx.instance,h,c);};this.detectTimeout=function(h){if(f.holderSetTimeout){clearTimeout(f.holderSetTimeout);}b.LW.GeoLocation.running=false;d.code="LW_DETECT_TIMEOUT";return f.detectCtx.callback.call(f.detectCtx.instance,h,d);};this.suggest=function(j,i){var l,k,h;if(typeof j!=="undefined"&&j.length>=this.autoCompleteCount){if(typeof(f.gossipResults[j])!=="undefined"){k=f.gossipResults[j];l=f.savedLocationList(j);if(l.length!==0){h=f.mergeLocations(l,k);}else{h=k;}f.favSuggLoc=h;return i.callback.call(i.instance,h,e);}b.LW.PlaceSuggest.suggestLocation(j,f.lat,f.lon,this.suggestSuccess,this.suggestFailure,this.suggestTimeout,i);}};this.savedLocationList=function(l){var q,k=0,h=0,p,m,o,n=[];if(typeof(f.cacheFavLoc)!=="undefined"&&f.cacheFavLoc.length){p=f.cacheFavLoc;m=(p?p.length:0);for(k;k<m;k=k+1){o=p[k];if(l.length===0){n[h]=o;h=h+1;}else{q=f.getAddressStr(o)||"";if((q&&q.toUpperCase().indexOf(l.toUpperCase())===0)){o.addr=q;n[h]=o;h=h+1;}else{if(o.zip&&o.zip.name&&o.zip.name.indexOf(l)===0){o.addr=q;n[h]=o;h=h+1;}}}}return n;}return[];};this.getAddressStr=function(n){var o=null,r=this.locale.toLowerCase(),l=[],q,k,h,i,m,p,j;q=n.addrstring||null;k=(n.town)?n.town.name:null;h=(n.state)?n.state.name:null;p=(n.state)?n.state.code:null;m=(n.country)?n.country.name:null;j=(n.country)?n.country.code:null;i=(n.zip)?n.zip.name:null;if(k!==null){o=k;if(r.indexOf("hk")!==-1||r.indexOf("tw")!==-1){if(typeof m!=="undefined"&&m){l.push(m);}if(typeof h!=="undefined"&&h&&o!==h){l.push(h);}l.push(o);}else{l.push(o);if(r.indexOf("it")!==-1||r.indexOf("au")!==-1||r.indexOf("br")!==-1||r.indexOf("mx")!==-1||r.indexOf("ca")!==-1||r.indexOf("us")!==-1){if(typeof p!=="undefined"&&p){l.push(p);}else{if(typeof h!=="undefined"&&h&&o!==h){l.push(h);}}}else{if(typeof h!=="undefined"&&h&&o!==h){l.push(h);}else{if(typeof p!=="undefined"&&p){l.push(p);}}}if(r.indexOf("us")!==-1&&typeof j!=="undefined"&&j){l.push(j);}else{if(typeof m!=="undefined"&&m){l.push(m);}}}o=l.join(", ");return o;}return null;};this.suggestSuccess=function(h,k,j){var n,l,i,m=b.LW.PlaceSuggest.suggestMakeLocArray(h.r,k);f.gossipResults[k]=m;l=f.gossipResults[k];n=f.savedLocationList(k);if(n.length!==0){i=f.mergeLocations(n,l);}else{i=l;}f.favSuggLoc=i;return j.callback.call(j.instance,i,e);};this.mergeLocations=function(h,t){var p=[],l=[],s=false,o=0,n=0,m=0,r=(h?h.length:0),q=(t?t.length:0);p=h;for(n;n<q;n=n+1){for(o;o<r;o=o+1){if(t[n].woe!==h[o].town.woe){s=true;}}if(s){l[m]=t[n];m=m+1;s=false;}o=0;}return(p.concat(l));};this.suggestFailure=function(i,h){c.code="LW_AUTOSUGGEST_FAILURE";if(i){return h.callback.call(h.instance,i,c);}};this.suggestTimeout=function(i,h){d.code="LW_AUTOSUGGEST_TIMEOUT";return h.callback.call(h.instance,i,d);};this.geocode=function(i,h){if(i.length>0){f.flLoc=[];b.LW.PlaceFinder.geocodeAddress(i,this.geocoderSuccess,this.geocoderFailure,this.geocoderTimeout,h);}else{this.suggest(i);}};this.geocoderSuccess=function(k,n){var h=[],m=0,l=0,o,q,p=b.LW.PlaceFinder.geocodeMakeLocArray(k.query.count,k);o=p.length;for(m;m<o;m=m+1){q=p[m];if(q.city&&q.city!==null){h[l]=q;l=l+1;}}f.flLoc=h;return n.callback.call(n.instance,h,e);};this.geocoderFailure=function(i,h){c.code="LW_GEOCODER_FAILURE";return h.callback.call(h.instance,i,c);};this.geocoderTimeout=function(i,h){d.code="LW_GEOCODER_TIMEOUT";return h.callback.call(h.instance,i,d);};this.addFavorite=function(i,h){b.LW.YQL.setLocation(i,f.addFavoriteSuccess,f.addFavoriteFailure,f.addFavoriteTimeout,h);};this.addFavoriteSuccess=function(h,i){return i.callback.call(i.instance,h,e,i);};this.addFavoriteFailure=function(i,h){c.code="LW_SET_ERROR";return h.callback.call(h.instance,i,c,h);};this.addFavoriteTimeout=function(i,h){d.code="LW_SET_ERROR";return h.callback.call(h.instance,i,d,h);};this.getAllFavorite=function(h){if(typeof(f.cacheFavLoc)!=="undefined"&&f.cacheFavLoc.length){return h.callback.call(h.instance,f.cacheFavLoc,e,h);}b.LW.YQL.getAllLocations(f.getFavoriteSuccess,f.getFavoriteFailure,f.getFavoriteTimeout,h);};this.getFavoriteSuccess=function(o,m){var h=[],n,p,l=0,k=0;n=(o?o.length:0);for(l;l<n;l=l+1){p=o[l];p.addr=f.getAddressStr(p);if(p.addr!==null){h[k]=p;k=k+1;}}f.invalidateCache();f.cacheFavLoc=h;return m.callback.call(m.instance,h,e,m);};this.getFavoriteFailure=function(i,h){c.code="LW_GET_ERROR";return h.callback.call(h.instance,i,c,h);};this.getFavoriteTimeout=function(i,h){d.code="LW_GET_TIMEOUT";return h.callback.call(h.instance,i,d,h);};this.removeLocation=function(i,h){b.LW.YQL.deleteLocation(i,this.removeSuccess,this.removeFailure,this.removeTimeout,h);};this.updateFavCache=function(k){var j=0,h=f.cacheFavLoc.length;for(j;j<h;j=j+1){if(f.cacheFavLoc[j]&&f.cacheFavLoc[j].id===k){f.cacheFavLoc.splice(j,1);}}};this.removeSuccess=function(i,h){f.updateFavCache(h.locId);return h.callback.call(h.instance,i,e,h);};this.removeFailure=function(i,h){c.code="LW_REMOVE_ERROR";return h.callback.call(h.instance,i,c,h);};this.removeTimeout=function(i,h){d.code="LW_REMOVE_ERROR";return h.callback.call(h.instance,i,d,h);};}b.namespace("LW");b.LW.Core=a;},"@VERSION@",{requires:["node","event","lw_geo","lw_autosuggest","lw_placefinder_YQL","lw_yql"]});/* Copyright (c) 2014, Yahoo! Inc.  All rights reserved. */
YUI.add("lw_view",function(c){function b(){this.yrbContainer=null;this.pendingYrbCall=false;this.locale="en-US";this.setLocale=function(d){this.locale=d;};this.yrbReqSuccessFailure=function(d,e){return;};this.setYrbContainer=function(d,e){this.yrbContainer=d;e.msgContainer=this.yrbContainer;return;};this.initYrb=function(h,g,i){if(this.yrbContainer){h.msgContainer=this.yrbContainer;return;}this.yrbConfig={proto:h.proto,host:g||((h.proto==="https://")?"s.yimg.com":"l.yimg.com"),path:i||"/rl/ulw/yrb/4.0.5c/",base:"ulwv2yrb"};var f=this.yrbConfig.proto+this.yrbConfig.host+this.yrbConfig.path+this.yrbConfig.base+"_"+h.locale+".js?callback={callback}",e={instance:this,context:h,locale:h.locale,defaultLocale:h.defaultLocale,msgContainer:h.msgContainer},d=new c.JSONPRequest(f,{on:{success:this.yrbReqSuccessFailure,failure:this.yrbReqSuccessFailure},args:[e]});d.send();};return this;}function a(f){if(typeof a.yala==="undefined"){a.yala=new b();}if(typeof(this.core)==="undefined"){this.core=new c.LW.Core(f);}this.guid=YUI.guid("lw");this.id=this.guid+"_widget";this.minWidth=f.minWidth||250;this.defaultLocale="en-US";this.locale=f.locale||this.defaultLocale;this.node=f.parentNode;this.searchStartLen=2;this.state=null;this.positionXY=f.positionXY||null;this.zIndex=parseInt(f.zIndex,10)||1000;this.cssStyle=f.cssStyle||null;this.cssClass=f.cssClass||"";this.findLocation=f.findLocation||false;this.appID=f.app||null;this.callback=f.callback||null;this.errorCallback=f.errorCallback||null;this.lat=f.lat||null;this.lon=f.lon||null;this.rapid=null;this.isRapid=f.isRapid;this.isGlobalRapid=f.isGlobalRapid||false;this.globalRapidIns=f.globalRapidIns||null;this.rapidConf=f.rapidConf||null;this.rapidAddConf=f.rapidAddConf||null;this.rapidRemoveConf=f.rapidRemoveConf||null;this.proto=(window.location.protocol==="https:"||f.forceSSL)?"https://":"http://";this.viewOverlay=null;this.overlayContentBox=null;this.manageLocUrl="https://settings.yahoo.com/locations?lang={locale}";this.showFavorites=(typeof f.showFavorites!=="undefined"&&f.showFavorites===false)?false:true;var g="open",h="error",j="cleared",m="suggested",k="saved",d="queried",q="sqloc",o="detect",l="select",i="deleteloc",n="pin",e="new-",p="OK";this.msgContainer={LW_AUTOSUGGEST_TIMEOUT:"Attempt to retrieve suggestions is taking too long",LW_AUTOSUGGEST_FAILURE:"Attempt to fetch suggestions is taking too long",LW_GEOCODER_FAILURE:"Unable to retrieve a match",LW_GEOCODER_TIMEOUT:"Attempt to retrieve a match is taking too long",LW_DETECT_BROWSER_SUPPORT:"Your browser does not support location detection",LW_DETECT_FAILURE:"Unable to detect your accurate location",LW_DETECT_TIMEOUT:"Attempt to detect your accurate location is taking too long",LW_SET_ERROR:"Unable to add favorite location",LW_REMOVE_ERROR:"Unable to remove favorite location",LW_GET_ERROR:"Unable to retrieve your past locations",LW_GET_TIMEOUT:"Attempt to fetch your past locations is taking too long",LW_OS_LOCATION_DETECT:"Detect my location",LW_OS_DISMISS_TXT:"Dismiss",LW_GHOST_CITY:"Enter City",LW_GHOST_CITY_ZIP:"Enter City or Zipcode",LW_TRIGGER_ICON_TOOLTIP:"Change location",LW_DETECT_LOC_TOOLTIP:"Detect your location",LW_ADD_FAV_TOOLTIP:"Add to My Locations",LW_REMOVE_FAV_TOOLTIP:"Remove from My Locations",LW_OS_MANAGE_LOCATIONS:"Manage Locations",LW_PRIVACY_POLICY:"Privacy Policy",LW_OS_MANAGE_LOCATIONS_URL:"http://location.yahoo.com/locationmgt/?locale=en-US",LW_CURRENT_LOCATION_HELP_URL:"http://help.yahoo.com/l/us/yahoo/location/",LW_PRIVACY_POLICY_URL:"http://info.yahoo.com/privacy/us/yahoo/location"};this.init=function(){if(this.appID&&this.appID!=="universal_location_widget__v3"){this.core.init(f);if(this.defaultLocale!==this.locale){a.yala.initYrb(this,f.yrbHost,f.yrbPath);}}else{return;}};this.inputGhosting=function(){var r=c.one("#"+this.inputId),s=r.get("value"),t=c.one("#placeholder-"+this.inputId);t.setStyle("width",r.getComputedStyle("width"));t.setStyle("height",r.getComputedStyle("height"));if(s===""){t.show();}c.on(["focus","blur","keyup"],function(u){if(u.currentTarget.get("value")!==""&&t.getStyle("display")!=="none"){t.hide();}else{if(u.currentTarget.get("value")===""&&t.getStyle("display")==="none"){t.show();}}},r);};this.setPositionXY=function(r){this.positionXY=r;};this.setZindex=function(r){this.zIndex=parseInt(r,10);if(this.viewOverlay!==null){this.viewOverlay.set("zIndex",this.zIndex);}};this.makeElementId=function(r){return this.id+"_"+r;};this.show=function(){if(this.viewOverlay!==null){this.viewOverlay.show();}};this.hide=function(r){c.fire("lw-close",{target:r,widgetObj:this});};this.close=function(){if(this.viewOverlay!==null){this.viewOverlay.hide();}};this.hideError=function(r){if(c.one("#"+this.err_container_id)){c.one("#"+this.err_container_id).remove(true);this.err_container_id=null;this.err_close_id=null;this.err_msg_id=null;}r.halt();return;};this.showError=function(r){if(this.err_container_id&&c.one("#"+this.err_container_id)){c.one("#"+this.err_container_id).remove(true);}var s=this.buildErrorFrag(r);if(s){this.viewOverlay.get("contentBox").one(".lw-widget-bd").prepend(s);c.on("click",c.bind(this.hideError,this),"#"+this.err_close_id);}};this.initFocusManager=function(){this.overlayContentBox.plug(c.Plugin.NodeFocusManager,{descendants:"a",keys:{next:"down:40",previous:"down:38"},focusClass:{className:"lw-line-item-focus",fn:function(r){return r;}},circular:false});};this.dispatchCallback=function(u){var t=u.currentTarget,r=t.getAttribute("data-lid"),s=t.getAttribute("class"),v=t.getAttribute("data-action");if(v){switch(v){case n:if(s&&s.indexOf("lw-add-anchor")!==-1){this.pin(r,t);}break;case l:this.select(r,t);break;case o:this.detect(r,t);break;case i:this.deleteloc(r,t);break;default:u.halt();return;}if(c.UA.ie&&c.UA.ie===6){u.halt();}}};this.handleInputSubmit=function(s){var r=this.getInputValue(),t;if(this.findLocation){t={callback:this.suggestCallback,instance:this};this.core.geocode(r,t);}s.halt();return;};this.handleInputEvents=function(t){var r=t.target,s=YUI().Lang.trim(r.get("value")),u;if(40===t.keyCode&&!c.UA.touchEnabled){this.overlayContentBox.focusManager.refresh();this.overlayContentBox.focusManager.set("activeDescendant",0);this.overlayContentBox.focusManager.focus();t.halt();return;}if(13===t.keyCode||16===t.keyCode||17===t.keyCode||18===t.keyCode||37===t.keyCode||38===t.keyCode||39===t.keyCode||33===t.keyCode||34===t.keyCode){return;}if(s&&s.length>=this.searchStartLen){u={callback:this.suggestCallback,instance:this};this.core.suggest(s,u);}else{if(s===""){this.core.invalidateCache();this.viewOverlay.set("bodyContent","");u={target:null,callback:this.getAllFavoriteCallback,instance:this};this.core.getAllFavorite(u);}}return;};this.deleteloc=function(t,r){var s={locId:t,target:r,callback:this.deletelocCallback,instance:this};this.core.removeLocation(t,s);};this.select=function(v,s){var u=this.core.selectedLoc(v);if(u&&this.callback){var r=this,t={target:s,callback:function(x,w){if(w.status===p){r.callback(u);}else{r.showError("LW_DETECT_FAILURE");if(r.errorCallback){r.errorCallback(x);}}r.hide(s);},instance:this};this.core.addFavorite({type:"current",woe:u.woe&&u.woe.id?u.woe.id:u.woe,src:"declared"},t);}};this.pin=function(v,r){var u=this.core.selectedLoc(v),t,s;if(u){t={type:"favorite"};if(u.woe){t.woe=u.woe;}if(u.addr){t.addrstring=u.addr;}s={target:r,callback:this.pinCallback,instance:this};this.core.addFavorite(t,s);}};this.detect=function(t,r){var s={target:r,callback:this.detectCallback,instance:this};this.core.detect(s);};this.detectCallback=function(s,r){if(r.status===p){this.callback(s[0]);this.hide(c.one("#"+this.detectGeoId));this.state=j;}else{this.showError(r.code);if(this.errorCallback){this.errorCallback(s);}}};this.suggestCallback=function(s,r){if(r.status===p){var u="",t="",v="";t=this.buildLocationBody(s);this.lwBodyId=this.makeElementId("lwBody");v=c.substitute(this.LW_LOCS_CONTAINER_TEMPLATE,{lwBodyId:this.lwBodyId,topLocs:u+t});this.viewOverlay.set("bodyContent",v);this.state=m;}else{if(this.errorCallback){this.errorCallback(s);}}};this.deletelocCallback=function(s,r,x){if(r.status===p){var w=x.target,v,t=w.getAttribute("class"),u;if(t){v=w.get("parentNode");if(v.getAttribute("class").indexOf("loc-fav")!==-1){v.transition({duration:0.5,easing:"ease-out",height:{value:0,duration:0.5,easing:"ease-in"}},function(){var y;this.remove(true);if(c.UA.ie&&c.UA.ie===6){y=c.one(".lw-ie-scroll-start");if(y&&y.all("li").size()<=3){y.removeClass("lw-ie-scroll-start");y.removeClass("sq-locations-container");c.later(10,this,function(){y.addClass("sq-locations-container");});}}});}else{if(t.indexOf("lw-remove-anchor")!==-1){u=w.get("parentNode").one("a").getAttribute("data-lid");w.setAttribute("data-lid",u);w.get("parentNode").replaceClass("lw-loc-saved","lw-loc-queried");}}}this.state=j;}else{this.showError(r.code);if(this.errorCallback){this.errorCallback(s);}}};this.pinCallback=function(s,r,w){if(r.status===p){var v=w.target,t=v.getAttribute("class"),u=s.query.results.locdrop.Result;if(t&&t.indexOf("lw-add-anchor")!==-1){v.get("parentNode").one("a.lw-remove-anchor").setAttribute("data-lid",u);v.get("parentNode").replaceClass("lw-loc-queried","lw-loc-saved");}this.state=j;}else{this.showError(r.code);if(this.errorCallback){this.errorCallback(s);}}};this.getAllFavoriteCallback=function(s,r){if(r.status===p){var u="",t="",v="";if(this.showFavorites){t=this.buildLocationBody(s);}this.lwBodyId=this.makeElementId("lwBody");v=c.substitute(this.LW_LOCS_CONTAINER_TEMPLATE,{lwBodyId:this.lwBodyId,topLocs:u+t});this.viewOverlay.set("bodyContent",v);this.state=g;}else{this.showError(r.code);if(this.errorCallback){this.errorCallback(s);}this.state=h;}};this.getInputValue=function(){if(this.inputId){var s=c.one("#"+this.inputId),r=s.get("value");return YUI().Lang.trim(r);}return"";};this.geocode=function(){var s=null,r=this.getInputValue();this.controller.geocode({inputString:r,target:s});};this.handleDocumentKeyup=function(r){if(27===r.keyCode){this.hide(r.target);r.halt();return;}};this.open=function(v){var x,t,y,u,z="",s,w,r;if(this.defaultLocale!==this.locale&&!this.yrbContainer){t=this.locale.split("-").join("_");if(window["ulwv2yrb_"+t]){a.yala.setYrbContainer(window["ulwv2yrb_"+t],this);}}if(!this.viewOverlay){this.inputId=this.makeElementId("input");y="#"+this.inputId;this.lwHeaderId=this.makeElementId("lwHeader");this.lwInputFormId=this.makeElementId("lwInputForm");u=this.populateDetectBlock();u+=c.substitute(this.LW_OPEN_STATE_HEAD_TEMPLATE,{lwHeaderId:this.lwHeaderId,inputId:this.inputId,lwInputForm:this.lwInputFormId,ghostTxt:this.msgContainer.LW_GHOST_CITY_ZIP});w=c.substitute(this.manageLocUrl,{locale:this.locale});s=c.substitute(this.LW_MANAGE_LOC_TEMPLATE,{lwFooterId:this.lwFooterId,manageLocUrl:w,manageLocTxt:this.msgContainer.LW_OS_MANAGE_LOCATIONS});this.viewOverlay=new c.LW.Overlay({parentNode:this.node,headerContent:u,bodyContent:z,footerContent:s,width:this.minWidth,zIndex:this.zIndex,cssClass:this.cssClass,cssStyle:this.cssStyle,xy:(this.positionXY)?[this.positionXY[0],this.positionXY[1]]:null,render:true,visible:true});this.overlayContentBox=this.viewOverlay.get("contentBox").one(".lw-widget-bd");if(c.UA.touchEnabled){c.Event.defineOutside("touchstart");this.viewOverlay.get("contentBox").on("touchstartoutside",function(A){this.hide(A.target);},this);this.overlayContentBox.delegate("tap",this.dispatchCallback,"li a",this);}else{this.viewOverlay.get("contentBox").on("clickoutside",function(A){this.hide(A.target);},this);this.overlayContentBox.delegate("click",this.dispatchCallback,"li a",this);this.initFocusManager();this.handleTooltip();}this.overlayContentBox.get("parentNode").delegate("click",this.dispatchCallback,".lw-location-detect",this);c.on("keyup",c.bind(this.handleInputEvents,this),y);c.one("#"+this.lwInputFormId).on("submit",this.handleInputSubmit,this);x={target:null,callback:this.getAllFavoriteCallback,instance:this};this.core.getAllFavorite(x);if(this.isRapid&&this.rapidConf!==null){this.rapid=new YAHOO.i13n.Rapid(this.rapidConf);this.rapid.init();}if(c.UA.ie&&c.UA.ie<=10){this.inputGhosting();}this.state=g;}else{if(this.state&&(this.state===m)){this.show();if(c.UA.ie&&c.UA.ie<10){r=c.one("#"+this.inputId).get("value");c.one("#"+this.inputId).focus();c.one("#"+this.inputId).set("value",r);}}else{this.core.invalidateCache();this.viewOverlay.set("bodyContent","");x={target:null,callback:this.getAllFavoriteCallback,instance:this};this.core.getAllFavorite(x);this.show();this.state=g;c.one("#"+this.inputId).set("value","");}}c.one("#"+this.inputId).focus();};this.handleTooltip=function(){var s,u,t,r=".lw-favbtn";if(c.UA.mobile){return;}s=c.Node.create('<div class="lw-tooltip"><div class="yui3-widget-bd">bd</div><div class="yui3-widget-ft"></div></div>');t=new c.Overlay({srcNode:s,zIndex:100001000});t.hide();t.render();this.overlayContentBox.delegate("tooltip|mouseover",function(v){u=v.currentTarget.getAttribute("title");t.set("bodyContent",u);t.set("align",{node:v.currentTarget,points:[c.WidgetPositionAlign.BC,c.WidgetPositionAlign.TC]});t.show();},r,this);this.overlayContentBox.delegate(["tooltip|mouseout","tooltip|click"],function(){t.hide();},r,this);};this.buildErrorFrag=function(r){var s;this.err_container_id=this.guid+"_err_container";this.err_close_id=this.guid+"_err_close";this.err_msg_id=this.guid+"_err_msg";s={errContId:this.err_container_id,errCloseId:this.err_close_id,errMsgId:this.err_msg_id,errMsg:this.msgContainer[r],dismissTxt:this.msgContainer.LW_OS_DISMISS_TXT};return c.substitute(this.LW_LOC_ERR_TEMPLATE,s);};this.buildLocationFrag=function(t,y){var s=y.addr||"",x=y.id,u,r=(c.UA.touchEnabled)?"lw-line-item-touch":"lw-line-item",v,w;if(x.indexOf(e)===-1){u="loc-fav";v="loc-fav lw-loc-saved";}else{u="loc-srch";v="lw-loc-queried";}w={sqSlk:u,sqLocCls:v,locItemCls:r,locId:x,displayTtl:s,dAction:l,displayStr:s,rmLocTooltip:this.msgContainer.LW_REMOVE_FAV_TOOLTIP,addLocTooltip:this.msgContainer.LW_ADD_FAV_TOOLTIP};return c.substitute(this.LW_SQ_LOC_TEMPLATE,w);};this.populateDetectBlock=function(){this.detectGeoId=this.guid+"_detect_geo";var r={displayStr:this.msgContainer.LW_OS_LOCATION_DETECT,dtctTooltip:this.msgContainer.LW_DETECT_LOC_TOOLTIP,detectId:this.detectGeoId,dAction:o};return c.substitute(this.LW_DETECT_LOC_TEMPLATE,r);};this.buildLocationBody=function(u){var v="",r,s=0,t="";r=u.length||0;for(s;s<r;s=s+1){v+=this.buildLocationFrag(q,u[s]);}if(c.UA.ie&&c.UA.ie===6&&r>3){t=" lw-ie-scroll-start";}this.lwSQLocBlockId=this.makeElementId("SQLocBlockId");return c.substitute(this.LW_SQLOCS_CON_TEMPLATE,{sqLocs:v,lwSQLocBlockId:this.lwSQLocBlockId,customClass:t});};this.destroy=function(){this.close();};this.LW_OPEN_STATE_HEAD_TEMPLATE='<div class="lw-input-blk"><form class="lw-input-frm" id="{lwInputForm}"><b class="lw-input-icon"><i class="img-sprite"></i></b><div class="lw-input-wrap" id="{lwHeaderId}">';if(c.UA.ie&&c.UA.ie<=10){this.LW_OPEN_STATE_HEAD_TEMPLATE+='<input type="text" autocomplete="off" placeholder="" value="" class="lw-input-box" tabindex="0" id="{inputId}"/><label for="{inputId}" id="placeholder-{inputId}" class="lw-input-placeholder" style="display:none;" unselectable="on" onselectstart="return false;" onmousedown="return false;">{ghostTxt}</label>';}else{this.LW_OPEN_STATE_HEAD_TEMPLATE+='<input type="text" autocomplete="off" placeholder="{ghostTxt}" value="" class="lw-input-box" tabindex="0" id="{inputId}"/>';}this.LW_OPEN_STATE_HEAD_TEMPLATE+="</div></form></div>";if(c.UA.ie&&c.UA.ie===6){this.LW_LOCS_CONTAINER_TEMPLATE='<div id="{lwBodyId}" class="locations-container" style="height:1%">{topLocs}</div>';}else{this.LW_LOCS_CONTAINER_TEMPLATE='<div id="{lwBodyId}" class="locations-container">{topLocs}</div>';}this.LW_SQLOCS_CON_TEMPLATE='<ul id="{lwSQLocBlockId}" class="sq-locations-container{customClass}">{sqLocs}</ul>';this.LW_DETECT_LOC_TEMPLATE='<div class="lw-detect-blk"><a class="lw-location-detect lw-detect-lnk rapid-nonanchor-lt rapidnofollow" id="{detectId}" data-lid="{detectId}" data-action="{dAction}" data-action-outcome="dtctloc" data-ylk="elm:itm;slk:dtct;itc:1;" href="javascript:;" title="{dtctTooltip}">{displayStr}</a><button class="lw-location-detect lw-detect-btn rapidnofollow" data-action="{dAction}" data-lid="{detectId}" title="{dtctTooltip}"><i class="lw-location-detect lw-detect-icn lw-Icon img-sprite" data-action="{dAction}" data-lid="{detectId}"></i></button></div>';this.LW_SQ_LOC_TEMPLATE='<li class="{locItemCls} {sqLocCls}" data-lid="{locId}" data-action="{dAction}"><a data-lid="{locId}" title="{displayTtl}" data-action="{dAction}" href="javascript:;" data-action-outcome="slctloc" data-ylk="elm:itm;slk:{sqSlk};itc:1;" class="rapid-nonanchor-lt rapidnofollow lw-favlnk">{displayStr}</a><a data-lid="{locId}" data-action="'+i+'" href="javascript:;" title="{rmLocTooltip}" data-action-outcome="rmloc" data-ylk="elm:btn;slk:rm;itc:1;" class="rapid-nonanchor-lt rapidnofollow lw-remove-anchor lw-favbtn lw-remove-icon"><i class="img-sprite"></i></a><a data-lid="{locId}" data-action="'+n+'" href="javascript:;" title="{addLocTooltip}" data-action-outcome="slctloc" data-ylk="elm:btn;slk:loc-sug;itc:1;" class="rapid-nonanchor-lt rapidnofollow lw-add-anchor lw-favbtn lw-add-icon"><i class="img-sprite"></i></a></li>';this.LW_LOC_ERR_TEMPLATE='<div id="{errContId}" class="lw-err-blk" data-lid="" data-ltype="{lType}" title="{errMsg}"><span class="rapid-nonanchor-lt rapidnofollow lw-err-msg">{errMsg}</span><a href="javascript:;" id="{errCloseId}" data-action-outcome="rmerr" data-ylk="elm:btn;slk:rm-err;itc:1;" title="{dismissTxt}" class="rapid-nonanchor-lt rapidnofollow lw-err-close-blk"><i class="img-sprite"></i></a></div>';this.LW_MANAGE_LOC_TEMPLATE='<div style="*height:1%" class="lw-manageloc-blk"><a id="{id}" target="_blank" data-action-outcome="nav" data-action="click" data-ylk="elm:itm;slk:mng;itc:0;" href="{manageLocUrl}" class="lw-manageloc-lnk">{manageLocTxt}</a></div>';return this;}c.namespace("LW");c.LW.View=a;},"@VERSION@",{requires:["node","substitute","transition","lw_overlay","lw_core","overlay","lw_style_css"]});/* Copyright (c) 2014, Yahoo! Inc.  All rights reserved. */
YUI.add("ld_service",function(g){var d=g.ModulePlatform,b="MPServices",f="LD",a;function e(j,h,i){this.moduleapi=i;this._init(j,h);}e.prototype={_init:function(i,h){var j={parentNode:g.one("#"+i),app:"yahoo.locdrop.frontpage.desktop",callback:g.bind(this._locChanged,this),errorback:g.bind(this._error,this),crumb:h.crumb,locale:h.locale};this._widget=new g.LW.View(j);this._widget.init();this.logger=this.moduleapi.getService("metrologger");},_locChanged:function(k){var i=this.moduleapi,j=i&&i.getId(),h;if(k){if(k.city==""&&k.addr){h=k.addr.split(",");if(h[0]){k.city=h[0];}}this.fire("locationselect",k);a.broadcast(j,"ldw:defaultlocation",{displayName:k.city+", "+k.sc,loc:k});}},_error:function(j){var h=this.moduleapi,i=h&&h.getId();if(this.logger){this.logger.logError(i,"LocdropWidget: "+j.lastError);}},_filter:function(h){if(h.ctx&&h.ctx!=="local"){if(h.ctx=="global"&&h.type&&(h.type==="physical"||h.type==="default")){return true;}return false;}return true;},destroy:function(){this._widget.destroy();this._widget=null;delete (this._widget);this.logger=null;},open:function(){this._widget.open();}};g.augment(e,g.Event.Target);function c(h){this.moduleapi=h;}c.prototype={create:function(i,h){return new e(i,h,this.moduleapi);}};g.namespace(b);g[b][f]={name:"ld_service",getService:function(i,h){if(!a){a=i;}return new c(a.getModuleApi(h));}};if(d){d.registerService(g[b][f]);}},"1.0",{requires:["lw_view"]});/* Copyright (c) 2014, Yahoo! Inc.  All rights reserved. */
YUI.add("location_service",function(b){var n=b.ModulePlatform,f,d="MPServices",a="LocationProvider",g="loc-picker-handle",h="location-menu",l="menu-active",e="location-tooltip",c="disable-dd",i="dd:toggle-draggable-ui",j="location:update",o="location:ready",p="location:picker-open",m="location:picker-close";function k(q,u,s,r){this.moduleapi=s;this.body=q;this.id=u;this.autoHideId=null;this.parentBody=null;this.tooltip=null;this.locdropWidget=null;this.beacon=null;this.ldwService=s.getService("ld_service");var t=this.body.one(".loc-picker-wrapper");this.tooltip=this.tooltipService.create({parentNode:t,className:h,position:{box:"b",arrow:"t"},pointerClass:"img-sprite",msg:""});this.tooltip.content.setAttribute("id",this.id+"-"+e);this.registerAutoHide();if(r&&r.locDropSettings){this.setLocDropSettings(r.locDropSettings);if(r.locDropSettings.strFind){this.strFind=r.locDropSettings.strFind;}if(r.locDropSettings.glApi){this.glApi=r.locDropSettings.glApi;}}if(r&&r.strFind){this.strFind=r.strFind;}if(r&&r.parentBody){this.parentBody=r.parentBody;}if(r&&r.beacon){this.beacon=r.beacon;this.beacon.itc="1";this.beacon.action="click";}this.platform.subscribe(j,b.bind(this.hideMenu,this),this);this.platform.subscribe(o,this.handleLocationReady,this);this.body.on("click",b.bind(this.handleEvent,this));this.body.on("keyup",b.bind(this.handleEvent,this));if(this.hasLocDropSettings){this.subscribeLocdropWidget(this.id+"-"+e);}}k.prototype={platform:null,instrumentation:null,autoHide:null,strFind:"Find",userCitySelection:"",locDropSettings:{},hasLocDropSettings:false,setLocDropSettings:function(q){this.locDropSettings.crumb=q.crumb;this.locDropSettings.locale=q.locale;this.locDropSettings.bestLoc=q.bestLoc;this.locDropSettings.currentLoc=q.curLoc;this.locDropSettings.defaultLoc=q.defLoc;this.locDropSettings.userLoc=this.userCitySelection||q.userLoc;this.locDropSettings.glApi=q.glApi;this.hasLocDropSettings=true;},registerAutoHide:function(){var q=this.body;if(!b.one("body").hasClass("ua-ie6")){this.autoHideId=this.autoHide.register({targets:[q.one("."+g),q.one("#"+this.id+"-"+e)],hide:b.bind(this.hideMenu,this)});}},exposeMenu:function(r){var q=this.body.one("."+h);this.instrumentation.fireBeacon(this.beacon);q.removeClass("d-n");this.locdropWidget.open();this.body.addClass(l);this.body.addClass(c);this.tooltip.show(r,{noMsgUpdate:true});this.body.one(".lw-input-box").focus();this.moduleapi.broadcast(p);if(this.parentBody){this.moduleapi.broadcast(i,{el:this.parentBody,toggle:"off"});}},hideMenu:function(){var q,r;if(this.body){if(!this.body.hasClass(l)){return;}q=this.body.one("."+g);r=this.body.one("."+h);}else{return;}this.tooltip.hide();this.body.removeClass(l);this.body.removeClass(c);r.addClass("d-n");this.moduleapi.broadcast(m);if(this.parentBody){this.moduleapi.broadcast(i,{el:this.parentBody,toggle:"on"});}},subscribeLocdropWidget:function(r){var q=this.platform;q.listen("ldw:defaultlocation");this.locDropSettings.anchorClass="loc-label fz-s";this.locdropWidget=this.ldwService.create(r,this.locDropSettings);this.locdropWidget.on("locationselect",this.onLocWidgetSelect,this);this.locdropWidget.on("widgetclose",this.hideMenu,this);},onLocWidgetSelect:function(q){this.platform.fire(j,q);},handleEvent:function(s){var q,r=s.target;if(!b.one("body").hasClass("ua-ie6")){q=r.ancestor(".loc-picker-link",true)||r.ancestor(".loc-picker-icon",true);if(q){s.preventDefault();if(!this.body.hasClass(l)){this.handleLocationReady();this.exposeMenu(q);}else{this.hideMenu();}}if(r.hasClass("find-btn")){b.LD.LocWid.handleInputEvents(s,true);}}},destroy:function(){this.body=null;this.locdropWidget=null;this.tooltip.destroy();this.tooltip=null;this.autoHide.unregister(this.autoHideId);this.autoHide=null;},handleLocationReady:function(){if(!this.locdropWidget){this.subscribeLocdropWidget(this.id+"-"+e);}}};f={create:function(q,t,s,r){return new k(q,t,s,r);}};b.namespace(d);b[d][a]={name:"location_service",getService:function(q,r){if(!k.prototype.platform){k.prototype.instrumentation=q.getService("instrumentation");k.prototype.tooltipService=q.getService("tooltip");k.prototype.autoHide=q.getService("autohide");k.prototype.platform=q;}return f;}};if(n){n.registerService(b[d][a]);}},"1.0");/* Copyright (c) 2014, Yahoo! Inc.  All rights reserved. */
